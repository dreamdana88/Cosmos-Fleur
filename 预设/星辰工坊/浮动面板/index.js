import{createPinia as n}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';var e={259(n,e,t){t.r(e),t.d(e,{default:()=>c});var a=t(781),r=t.n(a),s=t(11),o=t.n(s)()(r());o.push([n.id,'.sc-overlay[data-v-47a08562]{width:100%;height:100%;height:100dvh;display:flex;align-items:center;justify-content:center;font-family:system-ui,-apple-system,sans-serif}.sc-backdrop[data-v-47a08562]{position:absolute;inset:0;background:rgba(0,0,0,0.6)}.sc-panel[data-v-47a08562]{position:relative;z-index:1;width:min(90vw,320px);height:min(80vh,500px);background:rgba(17,17,27,0.95);border-radius:12px;border:1px solid rgba(255,255,255,0.1);display:flex;flex-direction:column;overflow:hidden;box-shadow:0 8px 32px rgba(0,0,0,0.4);color:#fff}.sc-header[data-v-47a08562]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.08);flex-shrink:0}.sc-header-left[data-v-47a08562]{display:flex;align-items:center;gap:8px}.sc-title[data-v-47a08562]{font-weight:600;font-size:14px}.sc-back-btn[data-v-47a08562],.sc-close-btn[data-v-47a08562]{width:28px;height:28px;border-radius:8px;background:rgba(255,255,255,0.08);border:none;color:#9ca3af;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background 0.2s,color 0.2s;font-size:12px}.sc-back-btn[data-v-47a08562]:hover{background:rgba(255,255,255,0.15);color:#d1d5db}.sc-close-btn[data-v-47a08562]:hover{background:rgba(220,38,38,0.6);color:#fff}.sc-content[data-v-47a08562]{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:6px;scrollbar-width:thin;scrollbar-color:#4b5563 transparent}.sc-content[data-v-47a08562]::-webkit-scrollbar{width:4px}.sc-content[data-v-47a08562]::-webkit-scrollbar-track{background:transparent}.sc-content[data-v-47a08562]::-webkit-scrollbar-thumb{background:#4b5563;border-radius:2px}.sc-group-item[data-v-47a08562]{width:100%;display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-radius:12px;background:rgba(255,255,255,0.05);border:none;color:inherit;text-align:left;cursor:pointer;transition:background 0.2s;font-size:inherit}.sc-group-item[data-v-47a08562]:hover{background:rgba(255,255,255,0.1)}.sc-group-left[data-v-47a08562]{display:flex;align-items:center;gap:10px}.sc-group-icon[data-v-47a08562]{font-size:18px}.sc-group-label[data-v-47a08562]{font-size:14px;font-weight:500;color:#e5e7eb}.sc-group-right[data-v-47a08562]{display:flex;align-items:center;gap:8px}.sc-group-status[data-v-47a08562]{font-size:12px;color:#6b7280}.sc-chevron[data-v-47a08562]{font-size:12px;color:#6b7280;transition:color 0.2s}.sc-group-item:hover .sc-chevron[data-v-47a08562]{color:#d1d5db}.sc-divider[data-v-47a08562]{margin-top:8px;padding-top:8px;border-top:1px solid rgba(255,255,255,0.06)}.sc-entry-item[data-v-47a08562]{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-radius:12px;background:rgba(255,255,255,0.05);cursor:pointer;transition:background 0.2s}.sc-entry-item[data-v-47a08562]:hover{background:rgba(255,255,255,0.1)}.sc-entry-label[data-v-47a08562]{font-size:14px;padding-right:8px;color:#6b7280}.sc-entry-label.sc-entry-on[data-v-47a08562]{color:#e5e7eb}.sc-link-hint[data-v-47a08562]{padding:8px 12px;font-size:12px;color:#6b7280;display:flex;align-items:center;gap:4px}.sc-content.sc-content-slide[data-v-47a08562]{overflow:hidden;padding:0}.sc-slide-track[data-v-47a08562]{display:flex;width:200%;height:100%;transition:transform 0.3s ease}.sc-slid[data-v-47a08562]{transform:translateX(-50%)}.sc-slide-pane[data-v-47a08562]{width:50%;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:6px;scrollbar-width:thin;scrollbar-color:#4b5563 transparent}.sc-slide-pane[data-v-47a08562]::-webkit-scrollbar{width:4px}.sc-slide-pane[data-v-47a08562]::-webkit-scrollbar-track{background:transparent}.sc-slide-pane[data-v-47a08562]::-webkit-scrollbar-thumb{background:#4b5563;border-radius:2px}.sc-entry-actions[data-v-47a08562]{display:flex;align-items:center;gap:8px;flex-shrink:0}.sc-view-btn[data-v-47a08562]{width:28px;height:28px;border-radius:6px;background:rgba(255,255,255,0.08);border:none;color:#6b7280;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background 0.2s,color 0.2s;font-size:12px}.sc-view-btn[data-v-47a08562]:hover{background:rgba(99,102,241,0.3);color:#a5b4fc}.sc-detail-pane[data-v-47a08562]{gap:12px !important}.sc-detail-textarea[data-v-47a08562]{flex:1;min-height:200px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:#111 !important;-webkit-text-fill-color:#111;padding:12px;font-size:13px;line-height:1.6;resize:none;font-family:system-ui,-apple-system,sans-serif;outline:none}.sc-detail-textarea[data-v-47a08562]:focus{border-color:rgba(99,102,241,0.5)}.sc-save-btn[data-v-47a08562]{display:flex;align-items:center;justify-content:center;gap:6px;padding:10px;border-radius:8px;border:none;background:#6366f1;color:#fff;font-size:14px;cursor:pointer;transition:background 0.2s;flex-shrink:0}.sc-save-btn[data-v-47a08562]:hover{background:#4f46e5}.sc-macro-row[data-v-47a08562]{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-radius:12px;background:rgba(255,255,255,0.03)}.sc-macro-right[data-v-47a08562]{display:flex;align-items:center;gap:6px}.sc-auto-tag[data-v-47a08562]{font-size:10px;padding:2px 5px;border-radius:4px;background:rgba(255,255,255,0.06);color:#6b7280;letter-spacing:0.02em}.sc-macro-badge[data-v-47a08562]{font-size:12px;padding:2px 8px;border-radius:6px;background:rgba(239,68,68,0.15);color:#f87171}.sc-macro-badge.sc-macro-badge-on[data-v-47a08562]{background:rgba(110,231,183,0.12);color:#6ee7b7}\n','',{version:3,sources:['webpack://./src/æ˜Ÿè¾°å·¥åŠåˆ‡æ¢/Panel.vue'],names:[],mappings:'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',sourcesContent:['<template>\n  <div\n    v-if="panelOpen"\n    class="sc-overlay"\n  >\n    <div class="sc-backdrop" @click="panelOpen = false"></div>\n\n    <div class="sc-panel">\n      \x3c!-- é¡¶æ  --\x3e\n      <div class="sc-header">\n        <div class="sc-header-left">\n          <button\n            v-if="currentPage !== \'main\'"\n            class="sc-back-btn"\n            @click="handleBack"\n          >\n            <i class="fa-solid fa-chevron-left"></i>\n          </button>\n          <span class="sc-title">\n            {{ currentPage === \'main\' ? \'âš™ï¸ æ˜Ÿè¾°å·¥åŠ\' : pageTitle }}\n          </span>\n        </div>\n        <button class="sc-close-btn" @click="panelOpen = false">\n          <i class="fa-solid fa-xmark"></i>\n        </button>\n      </div>\n\n      \x3c!-- å†…å®¹åŒº --\x3e\n      <div class="sc-content" :class="{ \'sc-content-slide\': currentPage !== \'main\' }">\n        \x3c!-- ä¸»é¡µï¼šåˆ†ç»„åˆ—è¡¨ --\x3e\n        <template v-if="currentPage === \'main\'">\n          <button\n            v-for="group in groupList"\n            :key="group.key"\n            class="sc-group-item"\n            @click="navigateTo(group.key)"\n          >\n            <div class="sc-group-left">\n              <span class="sc-group-icon">{{ group.icon }}</span>\n              <span class="sc-group-label">{{ group.label }}</span>\n            </div>\n            <div class="sc-group-right">\n              <span class="sc-group-status">{{ getGroupStatus(group.key) }}</span>\n              <i class="fa-solid fa-chevron-right sc-chevron"></i>\n            </div>\n          </button>\n\n          \x3c!-- COT ç‹¬ç«‹å¼€å…³ --\x3e\n          <div class="sc-divider"></div>\n          <div class="sc-entry-item" @click="toggleEntry(COT_ENTRY)">\n            <div class="sc-group-left">\n              <span class="sc-group-icon">ğŸ±</span>\n              <span class="sc-group-label">ï¼ˆå“ˆåŸºç±³å¼€ï¼‰å¡COT</span>\n            </div>\n            <ToggleSwitch :enabled="entryStates[COT_ENTRY] ?? false" />\n          </div>\n\n          \x3c!-- æç¤ºè¯æ¨¡ç‰ˆ/å® çŠ¶æ€ï¼ˆè·ŸéšMVUè‡ªåŠ¨ï¼‰ --\x3e\n          <div class="sc-divider"></div>\n          <div class="sc-macro-row">\n            <div class="sc-group-left">\n              <span class="sc-group-icon">ğŸ”§</span>\n              <span class="sc-group-label">æç¤ºè¯æ¨¡ç‰ˆ/å®</span>\n            </div>\n            <div class="sc-macro-right">\n              <span class="sc-auto-tag">è·ŸéšMVU</span>\n              <span class="sc-macro-badge" :class="{ \'sc-macro-badge-on\': macroEnabled }">\n                {{ macroEnabled ? \'å·²å¯ç”¨\' : \'å·²ç¦ç”¨\' }}\n              </span>\n            </div>\n          </div>\n        </template>\n\n        \x3c!-- å­é¡µï¼šæ¨ªå‘æ»‘åŠ¨å®¹å™¨ --\x3e\n        <template v-else>\n          <div class="sc-slide-track" :class="{ \'sc-slid\': !!detailEntry }">\n            \x3c!-- å·¦ä¾§ï¼šæ¡ç›®åˆ—è¡¨ --\x3e\n            <div class="sc-slide-pane">\n              <div\n                v-for="entry in currentEntries"\n                :key="entry.name"\n                class="sc-entry-item"\n                @click="toggleEntry(entry.name)"\n              >\n                <span class="sc-entry-label" :class="{ \'sc-entry-on\': entryStates[entry.name] }">\n                  {{ entry.short }}\n                </span>\n                <div class="sc-entry-actions">\n                  <button class="sc-view-btn" @click.stop="openDetail(entry.name)" title="æŸ¥çœ‹/ç¼–è¾‘">\n                    <i class="fa-solid fa-pen-to-square"></i>\n                  </button>\n                  <ToggleSwitch :enabled="entryStates[entry.name] ?? false" />\n                </div>\n              </div>\n\n              \x3c!-- è”åŠ¨æç¤º --\x3e\n              <div v-if="linkHint" class="sc-link-hint">\n                <i class="fa-solid fa-link"></i>\n                <span>{{ linkHint }}</span>\n              </div>\n            </div>\n\n            \x3c!-- å³ä¾§ï¼šæ¡ç›®å†…å®¹ç¼–è¾‘ --\x3e\n            <div class="sc-slide-pane sc-detail-pane">\n              <textarea\n                v-model="editContent"\n                class="sc-detail-textarea"\n                placeholder="è¯¥æ¡ç›®æš‚æ— å†…å®¹"\n              ></textarea>\n              <button class="sc-save-btn" @click="saveDetail">\n                <i class="fa-solid fa-floppy-disk"></i>\n                <span>{{ saveLabel }}</span>\n              </button>\n            </div>\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport ToggleSwitch from \'./ToggleSwitch.vue\';\n\n// --- æ¡ç›®å®šä¹‰ ---\n\nconst GROUPS: Record<string, { icon: string; label: string; entries: { name: string; short: string }[] }> = {\n  èµ„æ–™å®¤: {\n    icon: \'ğŸ“š\', label: \'èµ„æ–™å®¤\',\n    entries: [\n      { name: \'ğŸ“šä»€ä¹ˆæ˜¯ä¸–ç•Œä¹¦\', short: \'ä»€ä¹ˆæ˜¯ä¸–ç•Œä¹¦\' },\n      { name: \'ğŸ“šä»€ä¹ˆæ˜¯æ­£åˆ™\', short: \'ä»€ä¹ˆæ˜¯æ­£åˆ™\' },\n      { name: \'ğŸ“šä»€ä¹ˆæ˜¯çŠ¶æ€æ \', short: \'ä»€ä¹ˆæ˜¯çŠ¶æ€æ \' },\n      { name: \'ğŸ“šä»€ä¹ˆæ˜¯MVU\', short: \'ä»€ä¹ˆæ˜¯MVU\' },\n    ],\n  },\n  åˆ›ä½œæ‰‹å†Œ: {\n    icon: \'ğŸ“‹\', label: \'åˆ›ä½œæ‰‹å†Œ\',\n    entries: [\n      { name: \'ğŸ“‹ç‚¼é‡‘ä¹‹è‰ºï¼ˆå¥³ï¼‰\', short: \'ç‚¼é‡‘ä¹‹è‰ºï¼ˆå¥³ï¼‰\' },\n      { name: \'ğŸ“‹ç‚¼é‡‘ä¹‹è‰ºï¼ˆç”·ï¼‰\', short: \'ç‚¼é‡‘ä¹‹è‰ºï¼ˆç”·ï¼‰\' },\n      { name: \'ğŸ“‹å¥³ç”·å¹³ç­‰\', short: \'å¥³ç”·å¹³ç­‰\' },\n      { name: \'ğŸ“‹åŒäººå¡ç‰¹åŒ–\', short: \'åŒäººå¡ç‰¹åŒ–\' },\n    ],\n  },\n  \'ğŸ‘¾\': {\n    icon: \'ğŸ‘¾\', label: \'ç”Ÿæˆè®¾ç½®\',\n    entries: [\n      { name: \'ğŸ‘¾äººç§°\', short: \'äººç§°\' },\n      { name: \'ğŸ‘¾åŒè¯­å¯¹ç™½\', short: \'åŒè¯­å¯¹ç™½\' },\n      { name: \'ğŸ‘¾ç”Ÿæˆè§„èŒƒ\', short: \'ç”Ÿæˆè§„èŒƒ\' },\n    ],\n  },\n  æäºº: {\n    icon: \'ğŸ‘¤\', label: \'æäºº\',\n    entries: [\n      { name: \'â­æäºº-ä¸»è§’è‰²\', short: \'ä¸»è§’è‰²\' },\n      { name: \'â­æäºº-nsfw\', short: \'nsfw\' },\n      { name: \'â­æäºº-çº¿ä¸Šäººè®¾\', short: \'çº¿ä¸Šäººè®¾\' },\n      { name: \'â­æäºº-æ¬¡è¦/é…è§’\', short: \'æ¬¡è¦/é…è§’\' },\n      { name: \'â­æäºº-è§’è‰²åˆ—è¡¨/æç®€NPC\', short: \'è§’è‰²åˆ—è¡¨/æç®€NPC\' },\n      { name: \'â­æäºº-useräººè®¾\', short: \'useräººè®¾\' },\n    ],\n  },\n  åˆ›ä¸–: {\n    icon: \'ğŸŒŸ\', label: \'åˆ›ä¸–\',\n    entries: [\n      { name: \'â­åˆ›ä¸–-ä¸–ç•Œä¹¦\', short: \'ä¸–ç•Œä¹¦\' },\n      { name: \'â­åˆ›ä¸–-æ„¿æ™¯ç‚¼åŒ–\', short: \'æ„¿æ™¯ç‚¼åŒ–\' },\n      { name: \'â­åˆ›ä¸–-æ–‡é£\', short: \'æ–‡é£\' },\n      { name: \'â­åˆ›ä¸–-çŠ¶æ€æ \', short: \'çŠ¶æ€æ \' },\n      { name: \'â­åˆ›ä¸–-å¼€åœºç™½\', short: \'å¼€åœºç™½\' },\n      { name: \'â­åˆ›ä¸–-ifçº¿è®¾å®šç”Ÿæˆ\', short: \'ifçº¿è®¾å®šç”Ÿæˆ\' },\n      { name: \'â­åˆ›ä¸–-å°å‰§åœºç”Ÿæˆ\', short: \'å°å‰§åœºç”Ÿæˆ\' },\n      { name: \'â­åˆ›ä¸–-ç”»åƒç”Ÿæˆ\', short: \'ç”»åƒç”Ÿæˆ\' },\n      { name: \'â­åˆ›ä¸–-å‘å¸ƒä»‹ç»\', short: \'å‘å¸ƒä»‹ç»\' },\n    ],\n  },\n  MVU: {\n    icon: \'ğŸ“\', label: \'MVU\',\n    entries: [\n      { name: \'â­MVU1-ç»“æ„ä¸è„šæœ¬\', short: \'MVU1 ç»“æ„ä¸è„šæœ¬\' },\n      { name: \'â­MVU2- å˜é‡åˆå§‹åŒ–\', short: \'MVU2 å˜é‡åˆå§‹åŒ–\' },\n      { name: \'â­MVU3- å˜é‡æ›´æ–°ä¸æŒ‡ä»¤é›†\', short: \'MVU3 å˜é‡æ›´æ–°ä¸æŒ‡ä»¤é›†\' },\n      { name: \'â­MVU4- åŠ¨æ€å†…å®¹æ„å»º\', short: \'MVU4 åŠ¨æ€å†…å®¹æ„å»º\' },\n      { name: \'â­MVU5- ç¾åŒ–çŠ¶æ€æ \', short: \'MVU5 ç¾åŒ–çŠ¶æ€æ \' },\n    ],\n  },\n};\n\nconst COT_ENTRY = \'ï¼ˆå“ˆåŸºç±³å¼€ï¼‰å¡COT-byæŠ¹èŒ¶è€å¸ˆ\';\n\nconst MVU_ENTRY_NAMES = GROUPS[\'MVU\'].entries.map(e => e.name);\n\nconst groupList = Object.entries(GROUPS).map(([key, val]) => ({ key, icon: val.icon, label: val.label }));\n\n// --- è”åŠ¨è§„åˆ™ ---\n\nconst SYNC_LINKS = [\n  { source: \'ğŸ“‹åŒäººå¡ç‰¹åŒ–\', targets: [\'ğŸ§ åŒäººç‰¹åŒ–\'] },\n  { source: \'â­åˆ›ä¸–-çŠ¶æ€æ \', targets: [\'ğŸ“šä»€ä¹ˆæ˜¯çŠ¶æ€æ \'] },\n];\n\nconst FORWARD_LINKS = [\n  {\n    sources: [\'â­MVU1-ç»“æ„ä¸è„šæœ¬\', \'â­MVU2- å˜é‡åˆå§‹åŒ–\', \'â­MVU3- å˜é‡æ›´æ–°ä¸æŒ‡ä»¤é›†\', \'â­MVU4- åŠ¨æ€å†…å®¹æ„å»º\', \'â­MVU5- ç¾åŒ–çŠ¶æ€æ \'],\n    target: \'ğŸ“šä»€ä¹ˆæ˜¯MVU\',\n  },\n];\n\nconst LINK_HINTS: Record<string, string> = {\n  MVU: \'å¼€å¯ä»»ä¸€MVUæ¡ç›® â†’ è‡ªåŠ¨å¼€å¯ã€Œä»€ä¹ˆæ˜¯MVUã€å¹¶ç¦ç”¨æç¤ºè¯æ¨¡ç‰ˆ/å®\',\n  åˆ›ä½œæ‰‹å†Œ: \'åŒäººå¡ç‰¹åŒ– â†” ğŸ§ åŒäººç‰¹åŒ– è”åŠ¨\',\n  åˆ›ä¸–: \'çŠ¶æ€æ  â†” ä»€ä¹ˆæ˜¯çŠ¶æ€æ  è”åŠ¨\',\n};\n\n// --- çŠ¶æ€ ---\n\nconst panelOpen = ref(false);\nconst currentPage = ref<string>(\'main\');\nconst entryStates = ref<Record<string, boolean>>({});\nconst detailEntry = ref<string | null>(null);\nconst editContent = ref(\'\');\nconst saveLabel = ref(\'ä¿å­˜\');\nconst macroEnabled = ref(true);\n\nconst pageTitle = computed(() => {\n  if (detailEntry.value) {\n    const entries = GROUPS[currentPage.value]?.entries ?? [];\n    const entry = entries.find(e => e.name === detailEntry.value);\n    return entry?.short ?? \'\';\n  }\n  return GROUPS[currentPage.value]?.label ?? \'\';\n});\nconst currentEntries = computed(() => GROUPS[currentPage.value]?.entries ?? []);\nconst linkHint = computed(() => LINK_HINTS[currentPage.value] ?? \'\');\n\n// --- ä»é¢„è®¾è¯»å–çŠ¶æ€ ---\n\nfunction refreshMacroState() {\n  // è¯»å–é…’é¦†åŠ©æ‰‹å®/æç¤ºè¯æ¨¡ç‰ˆçš„çœŸå®å½“å‰çŠ¶æ€\n  // checked=true è¡¨ç¤ºç¦ç”¨ï¼Œæ‰€ä»¥å–å\n  const $el = $(\'#macro-replace-disable-toggle, #TH-macro-enabled, #TH-macro-disabled\');\n  macroEnabled.value = !$el.prop(\'checked\');\n}\n\nfunction refreshStates() {\n  const preset = getPreset(\'in_use\');\n  const states: Record<string, boolean> = {};\n  for (const prompt of preset.prompts) {\n    states[prompt.name] = prompt.enabled;\n  }\n  entryStates.value = states;\n  refreshMacroState();\n}\n\nfunction getGroupStatus(groupKey: string): string {\n  const entries = GROUPS[groupKey]?.entries ?? [];\n  const onCount = entries.filter(e => entryStates.value[e.name]).length;\n  return `${onCount}/${entries.length}`;\n}\n\nfunction navigateTo(groupKey: string) {\n  detailEntry.value = null;\n  currentPage.value = groupKey;\n}\n\nfunction handleBack() {\n  if (detailEntry.value) {\n    detailEntry.value = null;\n  } else {\n    currentPage.value = \'main\';\n  }\n}\n\nfunction openDetail(entryName: string) {\n  const preset = getPreset(\'in_use\');\n  const prompt = preset.prompts.find(p => p.name === entryName);\n  editContent.value = prompt?.content ?? \'\';\n  detailEntry.value = entryName;\n}\n\nasync function saveDetail() {\n  if (!detailEntry.value) return;\n  const entryName = detailEntry.value;\n  const content = editContent.value;\n  await updatePresetWith(\'in_use\', preset => {\n    const prompt = preset.prompts.find(p => p.name === entryName);\n    if (prompt) prompt.content = content;\n    return preset;\n  });\n  saveLabel.value = \'å·²ä¿å­˜ âœ“\';\n  setTimeout(() => { saveLabel.value = \'ä¿å­˜\'; }, 1500);\n}\n\n// --- å®/æç¤ºè¯æ¨¡ç‰ˆæ§åˆ¶ ---\n\nfunction applyMacroState(enable: boolean) {\n  // é…’é¦†åŠ©æ‰‹ 3.0\n  const $toggle3 = $(\'#macro-replace-disable-toggle\');\n  if ($toggle3.length > 0 && $toggle3.prop(\'checked\') !== !enable) {\n    $toggle3.prop(\'checked\', !enable)[0].dispatchEvent(new Event(\'click\'));\n  }\n\n  // é…’é¦†åŠ©æ‰‹ 4.0\n  const $toggle4 = $(\'#TH-macro-enabled, #TH-macro-disabled\');\n  if ($toggle4.length > 0 && $toggle4.prop(\'checked\') !== !enable) {\n    $toggle4.trigger(\'click\');\n  }\n\n  // EJS æç¤ºè¯æ¨¡ç‰ˆ\n  const EjsTemplate = (window as any).EjsTemplate;\n  if (EjsTemplate) {\n    EjsTemplate.setFeatures({\n      enabled: enable,\n      generate_enabled: true,\n      generate_loader_enabled: true,\n      inject_loader_enabled: true,\n      render_enabled: false,\n      render_loader_enabled: false,\n      code_blocks_enabled: false,\n      raw_message_evaluation_enabled: false,\n      filter_message_enabled: false,\n      autosave_enabled: false,\n      preload_worldinfo_enabled: false,\n      invert_enabled: true,\n      compile_workers: false,\n      sandbox: false,\n    });\n  }\n\n  macroEnabled.value = enable;\n}\n\nfunction syncMacroToMvu() {\n  // æœ‰ä»»æ„MVUæ¡ç›®å¼€å¯ â†’ ç¦ç”¨å®ï¼›å…¨éƒ¨å…³é—­ â†’ å¯ç”¨å®\n  const anyMvuOn = MVU_ENTRY_NAMES.some(name => entryStates.value[name]);\n  applyMacroState(!anyMvuOn);\n}\n\n// --- åˆ‡æ¢æ¡ç›® ---\n\nasync function toggleEntry(entryName: string) {\n  await updatePresetWith(\'in_use\', preset => {\n    const prompt = preset.prompts.find(p => p.name === entryName);\n    if (!prompt) return preset;\n\n    const newState = !prompt.enabled;\n    prompt.enabled = newState;\n\n    for (const rule of SYNC_LINKS) {\n      if (rule.source === entryName) {\n        for (const target of rule.targets) {\n          const tp = preset.prompts.find(p => p.name === target);\n          if (tp) tp.enabled = newState;\n        }\n      }\n    }\n\n    for (const rule of FORWARD_LINKS) {\n      if (rule.sources.includes(entryName)) {\n        if (newState) {\n          // å¼€å¯ä»»ä¸€æºæ¡ç›® â†’ åŒæ­¥å¼€å¯ç›®æ ‡\n          const tp = preset.prompts.find(p => p.name === rule.target);\n          if (tp) tp.enabled = true;\n        } else {\n          // å…³é—­æºæ¡ç›®æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦æ‰€æœ‰æºæ¡ç›®éƒ½å·²å…³é—­ï¼Œè‹¥æ˜¯åˆ™åŒæ­¥å…³é—­ç›®æ ‡\n          const allOff = rule.sources.every(src => {\n            const sp = preset.prompts.find(p => p.name === src);\n            return !sp?.enabled;\n          });\n          if (allOff) {\n            const tp = preset.prompts.find(p => p.name === rule.target);\n            if (tp) tp.enabled = false;\n          }\n        }\n      }\n    }\n\n    return preset;\n  });\n\n  refreshStates();\n\n  // MVUæ¡ç›®å˜åŠ¨æ—¶åŒæ­¥å®/æ¨¡ç‰ˆçŠ¶æ€\n  if (MVU_ENTRY_NAMES.includes(entryName)) {\n    syncMacroToMvu();\n  }\n}\n\n// --- åˆå§‹åŒ– ---\n\nwatch(panelOpen, (open) => {\n  if (open) {\n    currentPage.value = \'main\';\n    detailEntry.value = null;\n    refreshStates();\n  }\n});\n\nonMounted(() => {\n  refreshStates();\n});\n\ndefineExpose({ panelOpen });\n<\/script>\n\n<style scoped>\n.sc-overlay {\n  width: 100%;\n  height: 100%;\n  height: 100dvh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: system-ui, -apple-system, sans-serif;\n}\n\n.sc-backdrop {\n  position: absolute;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n\n.sc-panel {\n  position: relative;\n  z-index: 1;\n  width: min(90vw, 320px);\n  height: min(80vh, 500px);\n  background: rgba(17, 17, 27, 0.95);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n  color: #fff;\n}\n\n/* é¡¶æ  */\n.sc-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 16px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.08);\n  flex-shrink: 0;\n}\n\n.sc-header-left {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.sc-title {\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.sc-back-btn,\n.sc-close-btn {\n  width: 28px;\n  height: 28px;\n  border-radius: 8px;\n  background: rgba(255, 255, 255, 0.08);\n  border: none;\n  color: #9ca3af;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background 0.2s, color 0.2s;\n  font-size: 12px;\n}\n\n.sc-back-btn:hover {\n  background: rgba(255, 255, 255, 0.15);\n  color: #d1d5db;\n}\n\n.sc-close-btn:hover {\n  background: rgba(220, 38, 38, 0.6);\n  color: #fff;\n}\n\n/* å†…å®¹åŒº */\n.sc-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  scrollbar-width: thin;\n  scrollbar-color: #4b5563 transparent;\n}\n\n.sc-content::-webkit-scrollbar {\n  width: 4px;\n}\n\n.sc-content::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.sc-content::-webkit-scrollbar-thumb {\n  background: #4b5563;\n  border-radius: 2px;\n}\n\n/* åˆ†ç»„æ¡ç›® */\n.sc-group-item {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  border: none;\n  color: inherit;\n  text-align: left;\n  cursor: pointer;\n  transition: background 0.2s;\n  font-size: inherit;\n}\n\n.sc-group-item:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.sc-group-left {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.sc-group-icon {\n  font-size: 18px;\n}\n\n.sc-group-label {\n  font-size: 14px;\n  font-weight: 500;\n  color: #e5e7eb;\n}\n\n.sc-group-right {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.sc-group-status {\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.sc-chevron {\n  font-size: 12px;\n  color: #6b7280;\n  transition: color 0.2s;\n}\n\n.sc-group-item:hover .sc-chevron {\n  color: #d1d5db;\n}\n\n/* åˆ†éš”çº¿ */\n.sc-divider {\n  margin-top: 8px;\n  padding-top: 8px;\n  border-top: 1px solid rgba(255, 255, 255, 0.06);\n}\n\n/* æ¡ç›®è¡Œ */\n.sc-entry-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.sc-entry-item:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.sc-entry-label {\n  font-size: 14px;\n  padding-right: 8px;\n  color: #6b7280;\n}\n\n.sc-entry-label.sc-entry-on {\n  color: #e5e7eb;\n}\n\n/* è”åŠ¨æç¤º */\n.sc-link-hint {\n  padding: 8px 12px;\n  font-size: 12px;\n  color: #6b7280;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n/* æ¨ªå‘æ»‘åŠ¨å®¹å™¨ */\n.sc-content.sc-content-slide {\n  overflow: hidden;\n  padding: 0;\n}\n\n.sc-slide-track {\n  display: flex;\n  width: 200%;\n  height: 100%;\n  transition: transform 0.3s ease;\n}\n\n.sc-slid {\n  transform: translateX(-50%);\n}\n\n.sc-slide-pane {\n  width: 50%;\n  overflow-y: auto;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  scrollbar-width: thin;\n  scrollbar-color: #4b5563 transparent;\n}\n\n.sc-slide-pane::-webkit-scrollbar {\n  width: 4px;\n}\n\n.sc-slide-pane::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.sc-slide-pane::-webkit-scrollbar-thumb {\n  background: #4b5563;\n  border-radius: 2px;\n}\n\n/* æ¡ç›®è¡Œæ“ä½œåŒº */\n.sc-entry-actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n}\n\n.sc-view-btn {\n  width: 28px;\n  height: 28px;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.08);\n  border: none;\n  color: #6b7280;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background 0.2s, color 0.2s;\n  font-size: 12px;\n}\n\n.sc-view-btn:hover {\n  background: rgba(99, 102, 241, 0.3);\n  color: #a5b4fc;\n}\n\n/* å†…å®¹ç¼–è¾‘é¢æ¿ */\n.sc-detail-pane {\n  gap: 12px !important;\n}\n\n.sc-detail-textarea {\n  flex: 1;\n  min-height: 200px;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  color: #111 !important;\n  -webkit-text-fill-color: #111;\n  padding: 12px;\n  font-size: 13px;\n  line-height: 1.6;\n  resize: none;\n  font-family: system-ui, -apple-system, sans-serif;\n  outline: none;\n}\n\n.sc-detail-textarea:focus {\n  border-color: rgba(99, 102, 241, 0.5);\n}\n\n.sc-save-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 10px;\n  border-radius: 8px;\n  border: none;\n  background: #6366f1;\n  color: #fff;\n  font-size: 14px;\n  cursor: pointer;\n  transition: background 0.2s;\n  flex-shrink: 0;\n}\n\n.sc-save-btn:hover {\n  background: #4f46e5;\n}\n\n/* å®/æ¨¡ç‰ˆçŠ¶æ€è¡Œï¼ˆçº¯å±•ç¤ºï¼Œè·ŸéšMVUè‡ªåŠ¨ï¼‰ */\n.sc-macro-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.03);\n}\n\n.sc-macro-right {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.sc-auto-tag {\n  font-size: 10px;\n  padding: 2px 5px;\n  border-radius: 4px;\n  background: rgba(255, 255, 255, 0.06);\n  color: #6b7280;\n  letter-spacing: 0.02em;\n}\n\n.sc-macro-badge {\n  font-size: 12px;\n  padding: 2px 8px;\n  border-radius: 6px;\n  background: rgba(239, 68, 68, 0.15);\n  color: #f87171;\n}\n\n.sc-macro-badge.sc-macro-badge-on {\n  background: rgba(110, 231, 183, 0.12);\n  color: #6ee7b7;\n}\n</style>\n'],sourceRoot:''}]);const c=o},280(n,e,t){t.r(e),t.d(e,{default:()=>c});var a=t(781),r=t.n(a),s=t(11),o=t.n(s)()(r());o.push([n.id,'.sc-toggle[data-v-7f67dad3]{position:relative;width:36px;height:20px;border-radius:10px;background:#4b5563;transition:background 0.2s;flex-shrink:0}.sc-toggle-on[data-v-7f67dad3]{background:#6366f1}.sc-toggle-thumb[data-v-7f67dad3]{position:absolute;top:2px;left:2px;width:16px;height:16px;border-radius:50%;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,0.3);transition:transform 0.2s}.sc-toggle-thumb-on[data-v-7f67dad3]{transform:translateX(16px)}\n','',{version:3,sources:['webpack://./src/æ˜Ÿè¾°å·¥åŠåˆ‡æ¢/ToggleSwitch.vue'],names:[],mappings:'AAWA,4BACE,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,kBAAmB,CACnB,kBAAmB,CACnB,0BAA2B,CAC3B,aACF,CAEA,+BACE,kBACF,CAEA,kCACE,iBAAkB,CAClB,OAAQ,CACR,QAAS,CACT,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,eAAgB,CAChB,oCAAwC,CACxC,yBACF,CAEA,qCACE,0BACF',sourcesContent:['<template>\n  <div class="sc-toggle" :class="{ \'sc-toggle-on\': enabled }">\n    <div class="sc-toggle-thumb" :class="{ \'sc-toggle-thumb-on\': enabled }"></div>\n  </div>\n</template>\n\n<script setup lang="ts">\ndefineProps<{ enabled: boolean }>();\n<\/script>\n\n<style scoped>\n.sc-toggle {\n  position: relative;\n  width: 36px;\n  height: 20px;\n  border-radius: 10px;\n  background: #4b5563;\n  transition: background 0.2s;\n  flex-shrink: 0;\n}\n\n.sc-toggle-on {\n  background: #6366f1;\n}\n\n.sc-toggle-thumb {\n  position: absolute;\n  top: 2px;\n  left: 2px;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: #fff;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  transition: transform 0.2s;\n}\n\n.sc-toggle-thumb-on {\n  transform: translateX(16px);\n}\n</style>\n'],sourceRoot:''}]);const c=o},11(n){n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t='',a=void 0!==e[5];return e[4]&&(t+='@supports ('.concat(e[4],') {')),e[2]&&(t+='@media '.concat(e[2],' {')),a&&(t+='@layer'.concat(e[5].length>0?' '.concat(e[5]):'',' {')),t+=n(e),a&&(t+='}'),e[2]&&(t+='}'),e[4]&&(t+='}'),t}).join('')},e.i=function(n,t,a,r,s){'string'==typeof n&&(n=[[null,n,void 0]]);var o={};if(a)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(o[l]=!0)}for(var i=0;i<n.length;i++){var d=[].concat(n[i]);a&&o[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]='@layer'.concat(d[5].length>0?' '.concat(d[5]):'',' {').concat(d[1],'}')),d[5]=s),t&&(d[2]?(d[1]='@media '.concat(d[2],' {').concat(d[1],'}'),d[2]=t):d[2]=t),r&&(d[4]?(d[1]='@supports ('.concat(d[4],') {').concat(d[1],'}'),d[4]=r):d[4]=''.concat(r)),e.push(d))}},e}},781(n){n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if('function'==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),r='sourceMappingURL=data:application/json;charset=utf-8;base64,'.concat(a),s='/*# '.concat(r,' */');return[e].concat([s]).join('\n')}return[e].join('\n')}},92(n,e,t){var a=t(259);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[n.id,a,'']]),a.locals&&(n.exports=a.locals);(0,t(424).A)('68d63dfb',a,!1,{ssrId:!0})},225(n,e,t){var a=t(280);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[n.id,a,'']]),a.locals&&(n.exports=a.locals);(0,t(424).A)('2d69ea48',a,!1,{ssrId:!0})},441(n,e){e.A=(n,e)=>{const t=n.__vccOpts||n;for(const[n,a]of e)t[n]=a;return t}},424(n,e,t){function a(n,e){for(var t=[],a={},r=0;r<e.length;r++){var s=e[r],o=s[0],c={id:n+':'+r,css:s[1],media:s[2],sourceMap:s[3]};a[o]?a[o].parts.push(c):t.push(a[o]={id:o,parts:[c]})}return t}t.d(e,{A:()=>u});var r='undefined'!=typeof document;if('undefined'!=typeof DEBUG&&DEBUG&&!r)throw new Error('vue-style-loader cannot be used in a non-browser environment. Use { target: \'node\' } in your Webpack config to indicate a server-rendering environment.');var s={},o=r&&(document.head||document.getElementsByTagName('head')[0]),c=null,l=0,i=!1,d=function(){},p=null,A='data-vue-ssr-id',C='undefined'!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function u(n,e,t,r){i=t,p=r||{};var o=a(n,e);return g(o),function(e){for(var t=[],r=0;r<o.length;r++){var c=o[r];(l=s[c.id]).refs--,t.push(l)}e?g(o=a(n,e)):o=[];for(r=0;r<t.length;r++){var l;if(0===(l=t[r]).refs){for(var i=0;i<l.parts.length;i++)l.parts[i]();delete s[l.id]}}}}function g(n){for(var e=0;e<n.length;e++){var t=n[e],a=s[t.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](t.parts[r]);for(;r<t.parts.length;r++)a.parts.push(b(t.parts[r]));a.parts.length>t.parts.length&&(a.parts.length=t.parts.length)}else{var o=[];for(r=0;r<t.parts.length;r++)o.push(b(t.parts[r]));s[t.id]={id:t.id,refs:1,parts:o}}}}function m(){var n=document.createElement('style');return n.type='text/css',o.appendChild(n),n}function b(n){var e,t,a=document.querySelector('style['+A+'~="'+n.id+'"]');if(a){if(i)return d;a.parentNode.removeChild(a)}if(C){var r=l++;a=c||(c=m()),e=h.bind(null,a,r,!1),t=h.bind(null,a,r,!0)}else a=m(),e=x.bind(null,a),t=function(){a.parentNode.removeChild(a)};return e(n),function(a){if(a){if(a.css===n.css&&a.media===n.media&&a.sourceMap===n.sourceMap)return;e(n=a)}else t()}}var f,v=(f=[],function(n,e){return f[n]=e,f.filter(Boolean).join('\n')});function h(n,e,t,a){var r=t?'':a.css;if(n.styleSheet)n.styleSheet.cssText=v(e,r);else{var s=document.createTextNode(r),o=n.childNodes;o[e]&&n.removeChild(o[e]),o.length?n.insertBefore(s,o[e]):n.appendChild(s)}}function x(n,e){var t=e.css,a=e.media,r=e.sourceMap;if(a&&n.setAttribute('media',a),p.ssrId&&n.setAttribute(A,e.id),r&&(t+='\n/*# sourceURL='+r.sources[0]+' */',t+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+' */'),n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={id:n,exports:{}};return e[n](s,s.exports,a),s.exports}a.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return a.d(e,{a:e}),e},a.d=(n,e)=>{for(var t in e)a.o(e,t)&&!a.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},a.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),a.r=n=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(n,'__esModule',{value:!0})};const r=Vue,s=(0,r.defineComponent)({__name:'ToggleSwitch',props:{enabled:{type:Boolean}},setup:n=>(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)('div',{class:(0,r.normalizeClass)(['sc-toggle',{'sc-toggle-on':n.enabled}])},[(0,r.createElementVNode)('div',{class:(0,r.normalizeClass)(['sc-toggle-thumb',{'sc-toggle-thumb-on':n.enabled}])},null,2)],2))});a(225);var o=a(441);const c=(0,o.A)(s,[['__scopeId','data-v-7f67dad3']]),l={key:0,class:'sc-overlay'},i={class:'sc-panel'},d={class:'sc-header'},p={class:'sc-header-left'},A={class:'sc-title'},C=['onClick'],u={class:'sc-group-left'},g={class:'sc-group-icon'},m={class:'sc-group-label'},b={class:'sc-group-right'},f={class:'sc-group-status'},v={class:'sc-macro-row'},h={class:'sc-macro-right'},x={class:'sc-slide-pane'},B=['onClick'],k={class:'sc-entry-actions'},y=['onClick'],E={key:0,class:'sc-link-hint'},w={class:'sc-slide-pane sc-detail-pane'},V='ï¼ˆå“ˆåŸºç±³å¼€ï¼‰å¡COT-byæŠ¹èŒ¶è€å¸ˆ',N=(0,r.defineComponent)({__name:'Panel',setup(n,{expose:e}){const t={èµ„æ–™å®¤:{icon:'ğŸ“š',label:'èµ„æ–™å®¤',entries:[{name:'ğŸ“šä»€ä¹ˆæ˜¯ä¸–ç•Œä¹¦',short:'ä»€ä¹ˆæ˜¯ä¸–ç•Œä¹¦'},{name:'ğŸ“šä»€ä¹ˆæ˜¯æ­£åˆ™',short:'ä»€ä¹ˆæ˜¯æ­£åˆ™'},{name:'ğŸ“šä»€ä¹ˆæ˜¯çŠ¶æ€æ ',short:'ä»€ä¹ˆæ˜¯çŠ¶æ€æ '},{name:'ğŸ“šä»€ä¹ˆæ˜¯MVU',short:'ä»€ä¹ˆæ˜¯MVU'}]},åˆ›ä½œæ‰‹å†Œ:{icon:'ğŸ“‹',label:'åˆ›ä½œæ‰‹å†Œ',entries:[{name:'ğŸ“‹ç‚¼é‡‘ä¹‹è‰ºï¼ˆå¥³ï¼‰',short:'ç‚¼é‡‘ä¹‹è‰ºï¼ˆå¥³ï¼‰'},{name:'ğŸ“‹ç‚¼é‡‘ä¹‹è‰ºï¼ˆç”·ï¼‰',short:'ç‚¼é‡‘ä¹‹è‰ºï¼ˆç”·ï¼‰'},{name:'ğŸ“‹å¥³ç”·å¹³ç­‰',short:'å¥³ç”·å¹³ç­‰'},{name:'ğŸ“‹åŒäººå¡ç‰¹åŒ–',short:'åŒäººå¡ç‰¹åŒ–'}]},'ğŸ‘¾':{icon:'ğŸ‘¾',label:'ç”Ÿæˆè®¾ç½®',entries:[{name:'ğŸ‘¾äººç§°',short:'äººç§°'},{name:'ğŸ‘¾åŒè¯­å¯¹ç™½',short:'åŒè¯­å¯¹ç™½'},{name:'ğŸ‘¾ç”Ÿæˆè§„èŒƒ',short:'ç”Ÿæˆè§„èŒƒ'}]},æäºº:{icon:'ğŸ‘¤',label:'æäºº',entries:[{name:'â­æäºº-ä¸»è§’è‰²',short:'ä¸»è§’è‰²'},{name:'â­æäºº-nsfw',short:'nsfw'},{name:'â­æäºº-çº¿ä¸Šäººè®¾',short:'çº¿ä¸Šäººè®¾'},{name:'â­æäºº-æ¬¡è¦/é…è§’',short:'æ¬¡è¦/é…è§’'},{name:'â­æäºº-è§’è‰²åˆ—è¡¨/æç®€NPC',short:'è§’è‰²åˆ—è¡¨/æç®€NPC'},{name:'â­æäºº-useräººè®¾',short:'useräººè®¾'}]},åˆ›ä¸–:{icon:'ğŸŒŸ',label:'åˆ›ä¸–',entries:[{name:'â­åˆ›ä¸–-ä¸–ç•Œä¹¦',short:'ä¸–ç•Œä¹¦'},{name:'â­åˆ›ä¸–-æ„¿æ™¯ç‚¼åŒ–',short:'æ„¿æ™¯ç‚¼åŒ–'},{name:'â­åˆ›ä¸–-æ–‡é£',short:'æ–‡é£'},{name:'â­åˆ›ä¸–-çŠ¶æ€æ ',short:'çŠ¶æ€æ '},{name:'â­åˆ›ä¸–-å¼€åœºç™½',short:'å¼€åœºç™½'},{name:'â­åˆ›ä¸–-ifçº¿è®¾å®šç”Ÿæˆ',short:'ifçº¿è®¾å®šç”Ÿæˆ'},{name:'â­åˆ›ä¸–-å°å‰§åœºç”Ÿæˆ',short:'å°å‰§åœºç”Ÿæˆ'},{name:'â­åˆ›ä¸–-ç”»åƒç”Ÿæˆ',short:'ç”»åƒç”Ÿæˆ'},{name:'â­åˆ›ä¸–-å‘å¸ƒä»‹ç»',short:'å‘å¸ƒä»‹ç»'}]},MVU:{icon:'ğŸ“',label:'MVU',entries:[{name:'â­MVU1-ç»“æ„ä¸è„šæœ¬',short:'MVU1 ç»“æ„ä¸è„šæœ¬'},{name:'â­MVU2- å˜é‡åˆå§‹åŒ–',short:'MVU2 å˜é‡åˆå§‹åŒ–'},{name:'â­MVU3- å˜é‡æ›´æ–°ä¸æŒ‡ä»¤é›†',short:'MVU3 å˜é‡æ›´æ–°ä¸æŒ‡ä»¤é›†'},{name:'â­MVU4- åŠ¨æ€å†…å®¹æ„å»º',short:'MVU4 åŠ¨æ€å†…å®¹æ„å»º'},{name:'â­MVU5- ç¾åŒ–çŠ¶æ€æ ',short:'MVU5 ç¾åŒ–çŠ¶æ€æ '}]}},a=t.MVU.entries.map(n=>n.name),s=Object.entries(t).map(([n,e])=>({key:n,icon:e.icon,label:e.label})),o=[{source:'ğŸ“‹åŒäººå¡ç‰¹åŒ–',targets:['ğŸ§ åŒäººç‰¹åŒ–']},{source:'â­åˆ›ä¸–-çŠ¶æ€æ ',targets:['ğŸ“šä»€ä¹ˆæ˜¯çŠ¶æ€æ ']}],N=[{sources:['â­MVU1-ç»“æ„ä¸è„šæœ¬','â­MVU2- å˜é‡åˆå§‹åŒ–','â­MVU3- å˜é‡æ›´æ–°ä¸æŒ‡ä»¤é›†','â­MVU4- åŠ¨æ€å†…å®¹æ„å»º','â­MVU5- ç¾åŒ–çŠ¶æ€æ '],target:'ğŸ“šä»€ä¹ˆæ˜¯MVU'}],M={MVU:'å¼€å¯ä»»ä¸€MVUæ¡ç›® â†’ è‡ªåŠ¨å¼€å¯ã€Œä»€ä¹ˆæ˜¯MVUã€å¹¶ç¦ç”¨æç¤ºè¯æ¨¡ç‰ˆ/å®',åˆ›ä½œæ‰‹å†Œ:'åŒäººå¡ç‰¹åŒ– â†” ğŸ§ åŒäººç‰¹åŒ– è”åŠ¨',åˆ›ä¸–:'çŠ¶æ€æ  â†” ä»€ä¹ˆæ˜¯çŠ¶æ€æ  è”åŠ¨'},U=(0,r.ref)(!1),S=(0,r.ref)('main'),F=(0,r.ref)({}),T=(0,r.ref)(null),O=(0,r.ref)(''),Y=(0,r.ref)('ä¿å­˜'),P=(0,r.ref)(!0),j=(0,r.computed)(()=>{if(T.value){const n=(t[S.value]?.entries??[]).find(n=>n.name===T.value);return n?.short??''}return t[S.value]?.label??''}),R=(0,r.computed)(()=>t[S.value]?.entries??[]),D=(0,r.computed)(()=>M[S.value]??'');function W(){const n=getPreset('in_use'),e={};for(const t of n.prompts)e[t.name]=t.enabled;F.value=e,function(){const n=$('#macro-replace-disable-toggle, #TH-macro-enabled, #TH-macro-disabled');P.value=!n.prop('checked')}()}function q(n){const e=t[n]?.entries??[];return`${e.filter(n=>F.value[n.name]).length}/${e.length}`}function G(){T.value?T.value=null:S.value='main'}async function L(){if(!T.value)return;const n=T.value,e=O.value;await updatePresetWith('in_use',t=>{const a=t.prompts.find(e=>e.name===n);return a&&(a.content=e),t}),Y.value='å·²ä¿å­˜ âœ“',setTimeout(()=>{Y.value='ä¿å­˜'},1500)}function I(){!function(n){const e=$('#macro-replace-disable-toggle');e.length>0&&e.prop('checked')!==!n&&e.prop('checked',!n)[0].dispatchEvent(new Event('click'));const t=$('#TH-macro-enabled, #TH-macro-disabled');t.length>0&&t.prop('checked')!==!n&&t.trigger('click');const a=window.EjsTemplate;a&&a.setFeatures({enabled:n,generate_enabled:!0,generate_loader_enabled:!0,inject_loader_enabled:!0,render_enabled:!1,render_loader_enabled:!1,code_blocks_enabled:!1,raw_message_evaluation_enabled:!1,filter_message_enabled:!1,autosave_enabled:!1,preload_worldinfo_enabled:!1,invert_enabled:!0,compile_workers:!1,sandbox:!1}),P.value=n}(!a.some(n=>F.value[n]))}async function H(n){await updatePresetWith('in_use',e=>{const t=e.prompts.find(e=>e.name===n);if(!t)return e;const a=!t.enabled;t.enabled=a;for(const t of o)if(t.source===n)for(const n of t.targets){const t=e.prompts.find(e=>e.name===n);t&&(t.enabled=a)}for(const t of N)if(t.sources.includes(n))if(a){const n=e.prompts.find(n=>n.name===t.target);n&&(n.enabled=!0)}else{if(t.sources.every(n=>{const t=e.prompts.find(e=>e.name===n);return!t?.enabled})){const n=e.prompts.find(n=>n.name===t.target);n&&(n.enabled=!1)}}return e}),W(),a.includes(n)&&I()}return(0,r.watch)(U,n=>{n&&(S.value='main',T.value=null,W())}),(0,r.onMounted)(()=>{W()}),e({panelOpen:U}),(n,e)=>(0,r.unref)(U)?((0,r.openBlock)(),(0,r.createElementBlock)('div',l,[(0,r.createElementVNode)('div',{class:'sc-backdrop',onClick:e[0]||(e[0]=n=>U.value=!1)}),(0,r.createElementVNode)('div',i,[(0,r.createCommentVNode)(' é¡¶æ  '),(0,r.createElementVNode)('div',d,[(0,r.createElementVNode)('div',p,['main'!==(0,r.unref)(S)?((0,r.openBlock)(),(0,r.createElementBlock)('button',{key:0,class:'sc-back-btn',onClick:G},[...e[4]||(e[4]=[(0,r.createElementVNode)('i',{class:'fa-solid fa-chevron-left'},null,-1)])])):(0,r.createCommentVNode)('v-if',!0),(0,r.createElementVNode)('span',A,(0,r.toDisplayString)('main'===(0,r.unref)(S)?'âš™ï¸ æ˜Ÿè¾°å·¥åŠ':(0,r.unref)(j)),1)]),(0,r.createElementVNode)('button',{class:'sc-close-btn',onClick:e[1]||(e[1]=n=>U.value=!1)},[...e[5]||(e[5]=[(0,r.createElementVNode)('i',{class:'fa-solid fa-xmark'},null,-1)])])]),(0,r.createCommentVNode)(' å†…å®¹åŒº '),(0,r.createElementVNode)('div',{class:(0,r.normalizeClass)(['sc-content',{'sc-content-slide':'main'!==(0,r.unref)(S)}])},[(0,r.createCommentVNode)(' ä¸»é¡µï¼šåˆ†ç»„åˆ—è¡¨ '),'main'===(0,r.unref)(S)?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(s),n=>((0,r.openBlock)(),(0,r.createElementBlock)('button',{key:n.key,class:'sc-group-item',onClick:e=>{return t=n.key,T.value=null,void(S.value=t);var t}},[(0,r.createElementVNode)('div',u,[(0,r.createElementVNode)('span',g,(0,r.toDisplayString)(n.icon),1),(0,r.createElementVNode)('span',m,(0,r.toDisplayString)(n.label),1)]),(0,r.createElementVNode)('div',b,[(0,r.createElementVNode)('span',f,(0,r.toDisplayString)(q(n.key)),1),e[6]||(e[6]=(0,r.createElementVNode)('i',{class:'fa-solid fa-chevron-right sc-chevron'},null,-1))])],8,C))),128)),(0,r.createCommentVNode)(' COT ç‹¬ç«‹å¼€å…³ '),e[10]||(e[10]=(0,r.createElementVNode)('div',{class:'sc-divider'},null,-1)),(0,r.createElementVNode)('div',{class:'sc-entry-item',onClick:e[2]||(e[2]=n=>H(V))},[e[7]||(e[7]=(0,r.createElementVNode)('div',{class:'sc-group-left'},[(0,r.createElementVNode)('span',{class:'sc-group-icon'},'ğŸ±'),(0,r.createElementVNode)('span',{class:'sc-group-label'},'ï¼ˆå“ˆåŸºç±³å¼€ï¼‰å¡COT')],-1)),(0,r.createVNode)(c,{enabled:(0,r.unref)(F)[V]??!1},null,8,['enabled'])]),(0,r.createCommentVNode)(' æç¤ºè¯æ¨¡ç‰ˆ/å® çŠ¶æ€ï¼ˆè·ŸéšMVUè‡ªåŠ¨ï¼‰ '),e[11]||(e[11]=(0,r.createElementVNode)('div',{class:'sc-divider'},null,-1)),(0,r.createElementVNode)('div',v,[e[9]||(e[9]=(0,r.createElementVNode)('div',{class:'sc-group-left'},[(0,r.createElementVNode)('span',{class:'sc-group-icon'},'ğŸ”§'),(0,r.createElementVNode)('span',{class:'sc-group-label'},'æç¤ºè¯æ¨¡ç‰ˆ/å®')],-1)),(0,r.createElementVNode)('div',h,[e[8]||(e[8]=(0,r.createElementVNode)('span',{class:'sc-auto-tag'},'è·ŸéšMVU',-1)),(0,r.createElementVNode)('span',{class:(0,r.normalizeClass)(['sc-macro-badge',{'sc-macro-badge-on':(0,r.unref)(P)}])},(0,r.toDisplayString)((0,r.unref)(P)?'å·²å¯ç”¨':'å·²ç¦ç”¨'),3)])])],64)):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(' å­é¡µï¼šæ¨ªå‘æ»‘åŠ¨å®¹å™¨ '),(0,r.createElementVNode)('div',{class:(0,r.normalizeClass)(['sc-slide-track',{'sc-slid':!!(0,r.unref)(T)}])},[(0,r.createCommentVNode)(' å·¦ä¾§ï¼šæ¡ç›®åˆ—è¡¨ '),(0,r.createElementVNode)('div',x,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(R),n=>((0,r.openBlock)(),(0,r.createElementBlock)('div',{key:n.name,class:'sc-entry-item',onClick:e=>H(n.name)},[(0,r.createElementVNode)('span',{class:(0,r.normalizeClass)(['sc-entry-label',{'sc-entry-on':(0,r.unref)(F)[n.name]}])},(0,r.toDisplayString)(n.short),3),(0,r.createElementVNode)('div',k,[(0,r.createElementVNode)('button',{class:'sc-view-btn',onClick:(0,r.withModifiers)(e=>function(n){const e=getPreset('in_use').prompts.find(e=>e.name===n);O.value=e?.content??'',T.value=n}(n.name),['stop']),title:'æŸ¥çœ‹/ç¼–è¾‘'},[...e[12]||(e[12]=[(0,r.createElementVNode)('i',{class:'fa-solid fa-pen-to-square'},null,-1)])],8,y),(0,r.createVNode)(c,{enabled:(0,r.unref)(F)[n.name]??!1},null,8,['enabled'])])],8,B))),128)),(0,r.createCommentVNode)(' è”åŠ¨æç¤º '),(0,r.unref)(D)?((0,r.openBlock)(),(0,r.createElementBlock)('div',E,[e[13]||(e[13]=(0,r.createElementVNode)('i',{class:'fa-solid fa-link'},null,-1)),(0,r.createElementVNode)('span',null,(0,r.toDisplayString)((0,r.unref)(D)),1)])):(0,r.createCommentVNode)('v-if',!0)]),(0,r.createCommentVNode)(' å³ä¾§ï¼šæ¡ç›®å†…å®¹ç¼–è¾‘ '),(0,r.createElementVNode)('div',w,[(0,r.withDirectives)((0,r.createElementVNode)('textarea',{'onUpdate:modelValue':e[3]||(e[3]=n=>(0,r.isRef)(O)?O.value=n:null),class:'sc-detail-textarea',placeholder:'è¯¥æ¡ç›®æš‚æ— å†…å®¹'},null,512),[[r.vModelText,(0,r.unref)(O)]]),(0,r.createElementVNode)('button',{class:'sc-save-btn',onClick:L},[e[14]||(e[14]=(0,r.createElementVNode)('i',{class:'fa-solid fa-floppy-disk'},null,-1)),(0,r.createElementVNode)('span',null,(0,r.toDisplayString)((0,r.unref)(Y)),1)])])],2)],64))],2)])])):(0,r.createCommentVNode)('v-if',!0)}});a(92);const M=(0,o.A)(N,[['__scopeId','data-v-47a08562']]);$(()=>{const e=(0,r.createApp)(M).use(n()),t=$('<div>').attr('script_id',getScriptId()).css({position:'fixed',top:'0',left:'0',width:'100%',height:'100%','z-index':'99999',display:'none'}).appendTo($('body'));t[0].style.height='100dvh';const{destroy:a}=function(n='head'){const e=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone()).appendTo(n);return{destroy:()=>e.remove()}}(),s=e.mount(t[0]);(0,r.watch)(()=>s.panelOpen,n=>{n||t.css('display','none')}),replaceScriptButtons([{name:'âš™ï¸æ˜Ÿè¾°å·¥åŠ',visible:!0}]),eventOn(getButtonEvent('âš™ï¸æ˜Ÿè¾°å·¥åŠ'),function(){t.css('display','block'),s.panelOpen=!0}),$(window).on('pagehide',()=>{e.unmount(),t.remove(),a(),replaceScriptButtons([])})});
//# sourceMappingURL=index.js.map
